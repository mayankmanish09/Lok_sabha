
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <!-----------------------------------------------Stylesheet link for main html and stylesheet for the textual psrt--------------------------->
    <link type="text/css" rel="stylesheet" href="style.css"/>
    <link type="text/css" rel="stylesheet" href="../css/button.css"/>
    <style type="text/css">
text {
  font-size: 8px;
  pointer-events: none;
}

text.parent {
  fill: #1f77b4;
}

circle {
  fill: #ccc;
  stroke: #999;
  pointer-events: all;
}

circle.parent {
  fill: #1f77b4;
  fill-opacity: .1;
  stroke: steelblue;
}

circle.parent:hover {
  stroke: #ff7f0e;
  stroke-width: .5px;
}

circle.child {
  pointer-events: none;
}

    </style>
    <!------------------------------------------------------------------Stylesheet ends------------------------------------------------------->
  </head>
  <body>
  
  <div id="chart" align="center">
      <a href = "Pack-hierarchy.html"><button id="view1">
        Education
      </button></a><a href = "Pack-hierarchy2.html"><button id="view2"><!---linking to the next view of the tree map containing the names of the mps--->
        Age
      </button></a><a href = "Pack-hierarchy3.html"><button id="view3">
      Debates
      </button></a><button id="view4" class = "active">Attendance</button>
      <p><b>Here the size of the circle representes the attendance of the mp.</b></p>
      <p>We might be expecting that higher educated people should be having higher attendance. But actually, here we see that they are as good as low educated people in attendance.i.e almost every mp has at an average, attendance around 65 to 75%.</p>
      <p>Hypothesis that higher education is directly related to attendance cant be predicted visually.</p>
    </div>
  
  <!----importing the d3 library---->
    <script type="text/javascript" src="../js/d3.v2.js"></script>
    <!------------------------------------------------------------------Pack-heirarchy.js---------------------------------------------------------->
    <script type="text/javascript">

var w = 1280,																						//defining width and height
    h = 800,
    r = 720,
    x = d3.scale.linear().range([0, r]),
    y = d3.scale.linear().range([0, r]),
    node,
    root;

var pack = d3.layout.pack()
    .size([r, r])
    .value(function(d) { return d.size; })

var vis = d3.select("body").insert("svg:svg", "h2")
    .attr("width", w)
    .attr("height", h)
  .append("svg:g")
    .attr("transform", "translate(" + (w - r) / 2 + "," + (h - r) / 2 + ")");

d3.json("../data/flare4_edu_att.json", function(data) {															//input file containg data
  node = root = data;

  var nodes = pack.nodes(root);

  vis.selectAll("circle")
      .data(nodes)
    .enter().append("svg:circle")
      .attr("class", function(d) { return d.children ? "parent" : "child"; })
      .attr("cx", function(d) { return d.x; })
      .attr("cy", function(d) { return d.y; })
      .attr("r", function(d) { return d.r; })
      .on("click", function(d) { return zoom(node == d ? root : d); });

  vis.selectAll("text")
      .data(nodes)
    .enter().append("svg:text")
      .attr("class", function(d) { return d.children ? "parent" : "child"; })
      .attr("x", function(d) { return d.x; })
      .attr("y", function(d) { return d.y; })
      .attr("dy", ".35em")
      .attr("text-anchor", "middle")
      .style("opacity", function(d) { return d.r > 20 ? 1 : 0; })
      .text(function(d) { return d.name; });

  d3.select(window).on("click", function() { zoom(root); });
});

function zoom(d, i) {
  var k = r / d.r / 2;
  x.domain([d.x - d.r, d.x + d.r]);
  y.domain([d.y - d.r, d.y + d.r]);

  var t = vis.transition()
      .duration(d3.event.altKey ? 7500 : 750);

  t.selectAll("circle")
      .attr("cx", function(d) { return x(d.x); })
      .attr("cy", function(d) { return y(d.y); })
      .attr("r", function(d) { return k * d.r; });

  t.selectAll("text")
      .attr("x", function(d) { return x(d.x); })
      .attr("y", function(d) { return y(d.y); })
      .style("opacity", function(d) { return k * d.r > 20 ? 1 : 0; });

  node = d;
  d3.event.stopPropagation();
}

    </script>
    <!------------------------------------------------------------------end of Pack-heirarchy.js------------------------------------------------------>
  </body>
</html>
